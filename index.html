<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Premier League Score Predictor</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
      background-color: #1e2a78;
      color: #fff;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.2rem;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.4);
    }
    label { display: block; margin: 10px 0 5px; font-weight: 600; }
    select, input {
      width: 100%; padding: 10px; margin-bottom: 15px;
      border-radius: 8px; font-size: 1rem;
      color: #000;
    }
    select { background-color: rgba(255,255,255,0.9); }
    input { background-color: #fff; }
    .match {
      display: flex; align-items: center; gap: 5px;
      background: rgba(255,255,255,0.2); padding: 10px 12px;
      border-radius: 10px; margin-bottom: 8px;
      transition: transform 0.2s, background 0.3s;
    }
    .match:hover { transform: translateY(-2px); background: rgba(255,255,255,0.3); }
    .match input {
      width: 50px; text-align: center; border-radius:6px;
    }
    button {
      width: 100%; padding: 14px;
      background: #FFD700; color: #000;
      font-size: 1.1rem; font-weight: 600; border-radius: 10px;
      cursor: pointer; transition: background 0.3s, transform 0.2s;
    }
    button:hover { background: #FFC107; transform: translateY(-2px); }
    @media (max-width: 768px) {
      .match { flex-direction: column; align-items: flex-start; }
      .match input { width: 100%; margin-top: 5px; }
    }
  </style>
</head>
<body>

<h1>Premier League Score Predictor</h1>

<label for="player">Select Player:</label>
<select id="player">
  <option value="">--Select Player--</option>
  <option>Omar</option><option>Robbie</option><option>Khalil</option>
  <option>Idriss</option><option>Aboudi</option><option>Masri</option>
  <option>Hafez</option><option>Joseph</option><option>Rizk</option>
  <option>Dani</option>
</select>

<label for="gameweek">Select Gameweek:</label>
<select id="gameweek">
  <option value="">--Select Gameweek--</option>
  <script>
    for(let i=1; i<=38; i++){
      document.write(`<option value="${i}">Gameweek ${i}</option>`);
    }
  </script>
</select>

<div id="matches"></div>
<button onclick="submitPredictions()">Submit Predictions</button>

<script>
const fixtures = {
  1: ['Liverpool v AFC Bournemouth','Aston Villa v Newcastle United','Brighton & Hove Albion v Fulham','Sunderland v West Ham United','Tottenham Hotspur v Burnley','Wolverhampton Wanderers v Manchester City','Chelsea v Crystal Palace','Nottingham Forest v Brentford','Manchester United v Arsenal','Leeds United v Everton'],
  2: ['West Ham United v Chelsea','Manchester City v Tottenham Hotspur','AFC Bournemouth v Wolves','Brentford v Aston Villa','Burnley v Sunderland','Arsenal v Leeds United','Crystal Palace v Nottingham Forest','Everton v Brighton & Hove Albion','Fulham v Manchester United','Newcastle United v Liverpool'],
  3: ['Chelsea v Fulham','Manchester United v Burnley','Sunderland v Brentford','Tottenham Hotspur v AFC Bournemouth','Wolves v Everton','Leeds United v Newcastle United','Brighton & Hove Albion v Manchester City','Nottingham Forest v West Ham United','Liverpool v Arsenal','Aston Villa v Crystal Palace'],
  4: ['Arsenal v Nottingham Forest','AFC Bournemouth v Brighton & Hove Albion','Crystal Palace v Sunderland','Everton v Aston Villa','Fulham v Leeds United','Newcastle United v Wolves','West Ham United v Tottenham Hotspur','Brentford v Chelsea','Burnley v Liverpool','Manchester City v Manchester United']
  // Add 5-38 similarly
};

const gameweekSelect = document.getElementById('gameweek');
const matchesDiv = document.getElementById('matches');

gameweekSelect.addEventListener('change', () => {
  const gw = gameweekSelect.value;
  matchesDiv.innerHTML = '';
  if (fixtures[gw]) {
    fixtures[gw].forEach((match, idx) => {
      const div = document.createElement('div');
      div.classList.add('match');
      div.innerHTML = `
        <label>${match}</label>
        <input type="number" min="0" placeholder="Home" id="home_${idx}">
        <input type="number" min="0" placeholder="Away" id="away_${idx}">
      `;
      matchesDiv.appendChild(div);
    });
  }
});

function submitPredictions() {
  const player = document.getElementById('player').value;
  const gw = gameweekSelect.value;

  if (!player || !gw) {
    alert('Please select both player and gameweek.');
    return;
  }

  const predictions = fixtures[gw].map((match, idx) => ({
    match,
    homeScore: document.getElementById(`home_${idx}`).value,
    awayScore: document.getElementById(`away_${idx}`).value
  }));

  fetch('https://script.google.com/macros/s/AKfycby0U-v3MG34UTFT5P5RtzffsuqGI5G-zgOPoZ1L7Y-hYsDgUdW5wFgYYn0X8XVfxh24/exec', {
    method: 'POST',
    headers: { 'Content-Type': 'text/plain' },
    body: JSON.stringify({ player, gameweek: gw, predictions })
  })
  .then(response => response.json())
  .then(result => {
    if (result.status === 'success') {
      alert('Predictions submitted successfully!');
    } else {
      alert('Error: ' + (result.message || 'Failure from server'));
    }
  })
  .catch(err => {
    console.error(err);
    alert('Error submitting predictions. Please try again.');
  });
}
</script>

</body>
</html>