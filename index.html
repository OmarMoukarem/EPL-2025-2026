<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Premier League Score Predictor</title>
  <style>
    /* Add your CSS styles here */
  </style>
</head>
<body>
  <h1>Premier League Score Predictor</h1>
  <label for="player">Select Player:</label>
  <select id="player">
    <option value="">--Select Player--</option>
    <option>Omar</option>
    <option>Robbie</option>
    <option>Khalil</option>
    <option>Idriss</option>
    <option>Aboudi</option>
    <option>Masri</option>
    <option>Hafez</option>
    <option>Joseph</option>
    <option>Rizk</option>
    <option>Dani</option>
  </select>

  <label for="gameweek">Select Gameweek:</label>
  <select id="gameweek">
    <option value="">--Select Gameweek--</option>
    <!-- Gameweek options will be populated here -->
  </select>

  <div id="matches"></div>

  <button onclick="submitPredictions()">Submit Predictions</button>

  <script>
    const fixtures = {
      1: ['Liverpool v AFC Bournemouth', 'Aston Villa v Newcastle United', /* Add other matches */],
      2: ['West Ham United v Chelsea', 'Manchester City v Tottenham Hotspur', /* Add other matches */],
      // Add more gameweeks as needed
    };

    const gameweekSelect = document.getElementById('gameweek');
    const matchesDiv = document.getElementById('matches');

    // Populate gameweek options
    for (let i = 1; i <= 38; i++) {
      const option = document.createElement('option');
      option.value = i;
      option.textContent = `Gameweek ${i}`;
      gameweekSelect.appendChild(option);
    }

    gameweekSelect.addEventListener('change', () => {
      const gw = gameweekSelect.value;
      matchesDiv.innerHTML = '';
      if (fixtures[gw]) {
        fixtures[gw].forEach((match, idx) => {
          const div = document.createElement('div');
          div.classList.add('match');
          div.innerHTML = `
            <label>${match}</label>
            <input type="number" min="0" placeholder="Home" id="home_${idx}">
            <input type="number" min="0" placeholder="Away" id="away_${idx}">
          `;
          matchesDiv.appendChild(div);
        });
      }
    });

    function submitPredictions() {
      const player = document.getElementById('player').value;
      const gw = gameweekSelect.value;
      if (!player || !gw) {
        alert('Please select both player and gameweek.');
        return;
      }

      const predictions = fixtures[gw].map((match, idx) => ({
        match,
        homeScore: document.getElementById(`home_${idx}`).value,
        awayScore: document.getElementById(`away_${idx}`).value
      }));

      fetch('https://script.google.com/macros/s/AKfycbxqCzg33ZuFP4WX6Cy2uKH-5Vw6_9Jay9od-j25Bs6DUO0HMTjqMH2nIB8yfa-IGdYt/exec', {
        method: 'POST',
        headers: {
          'Content-Type': 'text/plain;charset=utf-8',
        },
        body: JSON.stringify({ player, gameweek: gw, predictions })
      })
      .then(response => response.json())
      .then(result => {
        if (result.status === 'success') {
          alert('Predictions submitted successfully!');
        } else {
          alert('Error: ' + (result.message || 'Failure from server'));
        }
      })
      .catch(err => {
        console.error(err);
        alert('Error submitting predictions. Please try again.');
      });
    }
  </script>
</body>
</html>